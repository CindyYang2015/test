<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloudwalk.ibis.repository.system.UserExtendMapper">
  <resultMap id="BaseResultMap" type="com.cloudwalk.ibis.model.system.User">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    <id column="USER_ID" jdbcType="VARCHAR" property="userId" />
    <result column="WORK_CODE" jdbcType="VARCHAR" property="workCode" />
    <result column="USER_LOGIN_NAME" jdbcType="VARCHAR" property="userLoginName" />
    <result column="USER_PWD" jdbcType="VARCHAR" property="userPwd" />
    <result column="USER_STATUS" jdbcType="DECIMAL" property="userStatus" />
    <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
    <result column="ORG_CODE" jdbcType="VARCHAR" property="orgCode" />
    <result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
    <result column="USER_RANK" jdbcType="VARCHAR" property="userRank" />
    <result column="EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="TELEPHONE" jdbcType="VARCHAR" property="telephone" />
    <result column="PICTURE_NAME" property="pictureName" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" jdbcType="DATE" property="createDate" />
    <result column="UPDATE_DATE" jdbcType="DATE" property="updateDate" />
    <result column="DELETE_DATE" jdbcType="DATE" property="deleteDate" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="ORG_NAME" jdbcType="VARCHAR" property="orgName" />
    <result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
  </resultMap>

  <sql id="SelectAll_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    <where>
     	 a.DEPT_CODE=d.DEPT_CODE AND d.ORG_CODE=b.ORG_CODE_PATH
      <if test="workCode != null and workCode != ''">
         AND a.WORK_CODE = #{workCode,jdbcType=VARCHAR} 
      </if>
      <if test="userLoginName != null and userLoginName != ''">
         AND a.USER_LOGIN_NAME = #{userLoginName,jdbcType=VARCHAR} 
      </if>
      <if test="userPwd != null and userPwd != ''">
         AND a.USER_PWD = #{userPwd,jdbcType=VARCHAR} 
      </if>
      <if test="userStatus != null and userStatus != ''">
         AND a.USER_STATUS = #{userStatus,jdbcType=DECIMAL} 
      </if>
      <if test="userName != null and userName != ''">
         AND a.USER_NAME = #{userName,jdbcType=VARCHAR} 
      </if>
      <if test="orgCode != null and orgCode != ''">
         AND b.ORG_CODE = #{orgCode,jdbcType=VARCHAR} 
      </if>
      <if test="deptCode != null and deptCode != ''">
         AND a.DEPT_CODE = #{deptCode,jdbcType=VARCHAR} 
      </if>
      <if test="userRank != null and userRank != ''">
         AND a.USER_RANK = #{userRank,jdbcType=VARCHAR} 
      </if>
      <if test="email != null and email != ''">
         AND a.EMAIL = #{email,jdbcType=VARCHAR} 
      </if>
      <if test="telephone != null and telephone != ''">
         AND a.TELEPHONE = #{telephone,jdbcType=VARCHAR} 
      </if>
      <if test="pictureName != null and pictureName != ''">
         AND a.PICTURE_NAME = #{pictureName,jdbcType=VARCHAR} 
      </if>
      <if test="createDate != null and createDate != ''">
         AND a.CREATE_DATE = #{createDate,jdbcType=DATE} 
      </if>
      <if test="updateDate != null and updateDate != ''">
         AND a.UPDATE_DATE = #{updateDate,jdbcType=DATE} 
      </if>
      <if test="deleteDate != null and deleteDate != ''">
         AND a.DELETE_DATE = #{deleteDate,jdbcType=DATE} 
      </if>     
      <if test="orgCode != null and orgCode != ''">
         AND b.ORG_CODE = #{orgCode,jdbcType=VARCHAR} 
      </if>
    </where>
  </sql>
  
  <sql id="SelectAllByPage_Where_Clause">
    <where>
     	a.DEPT_CODE=d.DEPT_CODE AND d.ORG_CODE=b.ORG_CODE_PATH
      <if test="obj.workCode != null and obj.workCode != ''">
         AND a.WORK_CODE = #{obj.workCode,jdbcType=VARCHAR} 
      </if>
      <if test="obj.userLoginName != null and obj.userLoginName != ''">
         AND a.USER_LOGIN_NAME = #{obj.userLoginName,jdbcType=VARCHAR} 
      </if>
      <if test="obj.userPwd != null and obj.userPwd != ''">
         AND a.USER_PWD = #{obj.userPwd,jdbcType=VARCHAR} 
      </if>
      <if test="obj.userStatus != null and obj.userStatus != ''">
         AND a.USER_STATUS = #{obj.userStatus,jdbcType=DECIMAL} 
      </if>
      <if test="obj.userName != null and obj.userName != ''">
         AND a.USER_NAME = #{obj.userName,jdbcType=VARCHAR} 
      </if>
      <if test="obj.orgCode != null and obj.orgCode != ''">
         AND b.ORG_CODE = #{obj.orgCode,jdbcType=VARCHAR} 
      </if>
      <if test="obj.deptCode != null and obj.deptCode != ''">
         AND a.DEPT_CODE = #{obj.deptCode,jdbcType=VARCHAR} 
      </if>
      <if test="obj.orgCodePath != null and obj.orgCodePath != ''">
         AND b.ORG_CODE_PATH LIKE '${obj.orgCodePath}%'
      </if>
      <if test="obj.userRank != null and obj.userRank != ''">
         AND a.USER_RANK = #{obj.userRank,jdbcType=VARCHAR} 
      </if>
      <if test="obj.email != null and obj.email != ''">
         AND a.EMAIL = #{obj.email,jdbcType=VARCHAR} 
      </if>
      <if test="obj.telephone != null and obj.telephone != ''">
         AND a.TELEPHONE = #{obj.telephone,jdbcType=VARCHAR} 
      </if>
      <if test="obj.pictureName != null and obj.pictureName != ''">
         AND a.PICTURE_NAME = #{obj.pictureName,jdbcType=VARCHAR} 
      </if>
      <if test="obj.createDate != null and obj.createDate != ''">
         AND a.CREATE_DATE = #{obj.createDate,jdbcType=DATE} 
      </if>
      <if test="obj.updateDate != null and obj.updateDate != ''">
         AND a.UPDATE_DATE = #{obj.updateDate,jdbcType=DATE} 
      </if>
      <if test="obj.deleteDate != null and obj.deleteDate != ''">
         AND a.DELETE_DATE = #{obj.deleteDate,jdbcType=DATE} 
      </if>         
     </where>
  </sql>
  
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    a.USER_ID AS userId, a.WORK_CODE AS workCode, a.USER_LOGIN_NAME AS userLoginName, a.USER_PWD AS userPwd, 
    a.USER_STATUS AS userStatus, a.USER_NAME AS userName, a.DEPT_CODE AS deptCode, a.LEGAL_ORG_CODE AS legalOrgCode,
    a.USER_RANK AS userRank, a.EMAIL AS email, a.TELEPHONE AS telephone, a.PICTURE_NAME AS pictureName, 
    a.CREATE_DATE AS createDate, a.UPDATE_DATE AS updateDate, a.DELETE_DATE AS deleteDate,
    b.ORG_CODE AS orgCode, b.ORG_CODE_PATH AS orgCodePath, b.ORG_NAME AS orgName, 
    b.ORG_ANAME AS orgAName, d.DEPT_NAME AS deptName, a.REMARK AS remark 
  </sql>
  
  <sql id="Base_Column">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    USER_ID AS userId,WORK_CODE AS workCode, USER_LOGIN_NAME AS userLoginName, USER_PWD AS userPwd, 
    USER_STATUS AS userStatus, USER_NAME AS userName,DEPT_CODE AS deptCode, 
    USER_RANK AS userRank, EMAIL AS email, TELEPHONE AS telephone, PICTURE_NAME AS pictureName, 
    CREATE_DATE AS createDate, UPDATE_DATE AS updateDate, DELETE_DATE AS deleteDate
  </sql>
  
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultType="com.cloudwalk.ibis.model.system.User">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    SELECT 
    <include refid="Base_Column_List" />
    FROM FND_USER a,FND_DEPARTMENT d,FND_ORGANIZATION b
    WHERE a.DEPT_CODE=d.DEPT_CODE 
    	AND d.ORG_CODE=b.ORG_CODE_PATH 
    	AND a.USER_ID = #{userId,jdbcType=VARCHAR}
  </select>
  
  <!-- 批量删除 -->
  <delete id="deleteByPrimaryKeyBatch" parameterType="java.util.List">
	DELETE FROM FND_USER WHERE USER_ID IN
  		<foreach item="idItem" collection="array" open="(" separator="," close=")">
			#{idItem}
		</foreach>
  </delete>
  
  <select id="selectAll" parameterType="com.cloudwalk.ibis.model.system.User" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    SELECT
    <include refid="Base_Column_List" />
    FROM FND_USER a, FND_DEPARTMENT d, FND_ORGANIZATION b
    <include refid="SelectAll_Where_Clause" />
  </select>
  
  <select id="selectAllByPage" parameterType="map" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    FROM FND_USER a, FND_DEPARTMENT d, FND_ORGANIZATION b
    <include refid="SelectAllByPage_Where_Clause" />
  </select>
  
  <select id="selectByPage" parameterType="map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    SELECT
    <include refid="Base_Column_List" />
    FROM FND_USER a, FND_DEPARTMENT d, FND_ORGANIZATION b
    <include refid="SelectAllByPage_Where_Clause" />
  </select>
  
  <select id="selectCount" parameterType="com.cloudwalk.ibis.model.system.User" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    SELECT COUNT(*) FROM FND_USER a, FND_DEPARTMENT d, FND_ORGANIZATION b
    <include refid="SelectAll_Where_Clause" />
  </select>
  
  <!-- 查询指定部门ID的记录数 -->
  <select id="selectCountOfDepartment" parameterType="java.lang.String" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 00:40:55 CST 2015.
    -->
    SELECT COUNT(USER_ID) FROM FND_USER WHERE DEPT_CODE IN 
    	<foreach item="idItem" collection="array" open="(" separator="," close=")">
			#{idItem}
		</foreach>
    
 </select> 	
  
</mapper>