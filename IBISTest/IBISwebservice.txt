*** Settings ***
Library           requests
Library           RequestsLibrary
Library           json
Library           Selenium2Library
Library           SudsLibrary
Resource          mykeywords.txt
Resource          变量.txt

*** Test Cases ***
注册webservices
    ${ctfno}    evaluate    random.randint(1, 299)    modules=random
    ${tradingFlowNO}    evaluate    random.randint(300,999)    modules=random
    webservice注册     reg    0300    xx    ${ctfno}    0200    cyface
    ...    0000    0600    ${tradingFlowNO}    ver001    ${regfileData}    ${soap}
    ...    成功

test
    ${regfileData}    set variable    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
    Create Soap Client    http://192.168.10.65:9001/ibis/services/recogWebService?wsdl
    ${json}    To Json    {"buscode":"reg","channel":"0300","ctfname":"ladfpn","ctfno":"6566229","ctftype":"0200","customerId":"525652233","engineCode":"cyface","orgCode":"0000","tradingCode":"0600","tradingFlowNO":"565666332565324","verCode":"ver001","regfileData":"${regfileData}"}    false
    ${resp}    Call Soap Method    excute    ${json}
    log    ${resp}
    ${statuscode}    set variable    失败
    Should contain    ${resp}    ${statuscode}

证特征比对webservice
    ${ctfno}    evaluate    random.randint(1, 299)    modules=random
    ${tradingFlowNO}    evaluate    random.randint(300,999)    modules=random
    webservice证特征比对    checkPerson    ver001    0000    ${ctfno}    xx    0200
    ...    0302    0604    cyface    ${fileDataone}    ${tradingFlowNO}    ${soap}
    ...    成功

脸脸比对webservice
    webservice脸脸比对    compare    0000    0302    0604    cyface    ver001
    ...    ${fileDataone}    ${fileDatatwo}    001    3    000    ${soap}
    ...    成功

身份证webservice
    ${tradingFlowNO}    evaluate    random.randint(300,999)    modules=random
    webservice身份证    ocr    0300    cyface    0000    0600    ${tradingFlowNO}
    ...    ver001    ${frontImge}    ${backImge}    ${soap}    成功

银行卡webservice
    ${tradingFlowNO}    evaluate    random.randint(300,999)    modules=random
    webservice银行卡    ocr    0300    cyface    0000    0600    ${tradingFlowNO}
    ...    ver001    ${bankCardImg}    ${soap}    成功

两证一脸比对webservice
    ${ctfno}    evaluate    random.randint(1, 299)    modules=random
    ${tradingFlowNO}    evaluate    random.randint(300,999)    modules=random
    webservice两证一脸比对    checkPersonEx    0302    xx    ${ctfno}    0200    cyface
    ...    0000    0604    ${tradingFlowNO}    ver001    ${fileDataone}    ${fileDatatwo}
    ...    ${soap}    成功
